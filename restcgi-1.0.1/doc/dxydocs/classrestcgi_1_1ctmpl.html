<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>restcgi: restcgi::ctmpl Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="namespacerestcgi.html">restcgi</a>::<a class="el" href="classrestcgi_1_1ctmpl.html">ctmpl</a></div>
<h1>restcgi::ctmpl Class Reference</h1><!-- doxytag: class="restcgi::ctmpl" --><a href="classrestcgi_1_1ctmpl-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Template for creating content using variable replacement. 
<p>
This class stores the template string and content type and has a method, <a class="el" href="classrestcgi_1_1ctmpl.html#4221097aac73915f01f451dbc02be4b8">eval()</a>, for replacing the escaped variable names, e.g. "%foo%", in the string with the variables' corresponding values, if any. Variables that are not defined are not replaced (resulting in the escaped names remaining in the string).<p>
Note that the exception class has provisions for both exception member data as variables and application-defined variables. The templating mechanism is designed primarily for the automatic creation of error response content from exceptions. Some of the status codes, however, should not produce any output content (see <a class="el" href="classrestcgi_1_1status__code__e.html">status_code_e</a> documentation).<p>
Variable names include the chars: ASCII alpha upper and lower, digits, underscore, hyphen. A name must begin with either ASCII alpha or underscore. The escape char must immediately precede and follow the name in the template.<p>
Variable names are looked up in the following places, in order: <ol>
<li>
map: names defined by application, case-sensitive </li>
<li>
env: HTTP header fields, request and content, names like "content-length", case-insensitive </li>
<li>
env: other than HTTP header fields, names like SCRIPT_URL, case-sensitive</li>
</ol>
<p>
Example: <div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;restcgi/ctmpl.h&gt;</span>
 <span class="keyword">using namespace </span>restcgi;
 ...
 <span class="comment">// method m is received for /cgi-bin/mycgi/myurl</span>
 ...
 <a class="code" href="classrestcgi_1_1ctmpl.html#4d2d454f63cf60fc3f31e7ee48598faf">ctmpl</a> ct(<span class="stringliteral">"hello, %foo% from %SCRIPT_URL%!"</span>);
 <a class="code" href="classrestcgi_1_1ctmpl.html#f2486c0cc6b8c3f67043ddc3bbd8d73e">ctmpl::map_type</a> map;
 map.insert(std::make_pair(<span class="stringliteral">"foo"</span>, <span class="stringliteral">"world"</span>));
 std::string out = ct.eval(m-&gt;env(), map);
 <span class="comment">// out == "hello, world from /cgi-bin/mycgi/myurl!"</span>
</pre></div> <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="namespacerestcgi.html#1d436bb86fb8d3173a8949c9c9dfc3c7">sc_ctmpls</a>, <a class="el" href="classrestcgi_1_1method.html">method</a>, <a class="el" href="classrestcgi_1_1exception.html">exception</a> </dd></dl>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::map&lt; std::string,<br>
 std::string &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrestcgi_1_1ctmpl.html#f2486c0cc6b8c3f67043ddc3bbd8d73e">map_type</a></td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4d2d454f63cf60fc3f31e7ee48598faf"></a><!-- doxytag: member="restcgi::ctmpl::ctmpl" ref="4d2d454f63cf60fc3f31e7ee48598faf" args="(const std::string &amp;s, const std::string &amp;content_type=&quot;text/plain&quot;)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrestcgi_1_1ctmpl.html#4d2d454f63cf60fc3f31e7ee48598faf">ctmpl</a> (const std::string &amp;s, const std::string &amp;content_type=&quot;text/plain&quot;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct from template string and content type. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrestcgi_1_1ctmpl.html#4221097aac73915f01f451dbc02be4b8">eval</a> (const <a class="el" href="classrestcgi_1_1env.html">env</a> &amp;e, const <a class="el" href="classrestcgi_1_1ctmpl.html#f2486c0cc6b8c3f67043ddc3bbd8d73e">map_type</a> &amp;map=<a class="el" href="classrestcgi_1_1ctmpl.html#f2486c0cc6b8c3f67043ddc3bbd8d73e">map_type</a>()) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrestcgi_1_1ctmpl.html#92e05f61a7d13adb75e2a8d83e7cf3d8">eval</a> (const <a class="el" href="classrestcgi_1_1ctmpl.html#f2486c0cc6b8c3f67043ddc3bbd8d73e">map_type</a> &amp;map) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const std::string &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrestcgi_1_1ctmpl.html#149b8a2058415e5d7e64a83c10717102">content_type</a> () const </td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1ea7e693c8049a5005e3945de3c6a379"></a><!-- doxytag: member="restcgi::ctmpl::find" ref="1ea7e693c8049a5005e3945de3c6a379" args="(const std::string &amp;name, std::string &amp;value, const env *e, const map_type &amp;map)" -->
static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrestcgi_1_1ctmpl.html#1ea7e693c8049a5005e3945de3c6a379">find</a> (const std::string &amp;name, std::string &amp;value, const <a class="el" href="classrestcgi_1_1env.html">env</a> *e, const <a class="el" href="classrestcgi_1_1ctmpl.html#f2486c0cc6b8c3f67043ddc3bbd8d73e">map_type</a> &amp;map)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find variable value for name returning whether found. <br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="11d1f7c0c5b93fadb1aa608e10fddc57"></a><!-- doxytag: member="restcgi::ctmpl::ESCAPE_CHAR" ref="11d1f7c0c5b93fadb1aa608e10fddc57" args="" -->
static const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrestcgi_1_1ctmpl.html#11d1f7c0c5b93fadb1aa608e10fddc57">ESCAPE_CHAR</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">variable name escape char ('%') <br></td></tr>
</table>
<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="f2486c0cc6b8c3f67043ddc3bbd8d73e"></a><!-- doxytag: member="restcgi::ctmpl::map_type" ref="f2486c0cc6b8c3f67043ddc3bbd8d73e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;std::string, std::string&gt; <a class="el" href="classrestcgi_1_1ctmpl.html#f2486c0cc6b8c3f67043ddc3bbd8d73e">restcgi::ctmpl::map_type</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
map type 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="149b8a2058415e5d7e64a83c10717102"></a><!-- doxytag: member="restcgi::ctmpl::content_type" ref="149b8a2058415e5d7e64a83c10717102" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string&amp; restcgi::ctmpl::content_type           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get content_type. 
</div>
</div><p>
<a class="anchor" name="92e05f61a7d13adb75e2a8d83e7cf3d8"></a><!-- doxytag: member="restcgi::ctmpl::eval" ref="92e05f61a7d13adb75e2a8d83e7cf3d8" args="(const map_type &amp;map) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string restcgi::ctmpl::eval           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classrestcgi_1_1ctmpl.html#f2486c0cc6b8c3f67043ddc3bbd8d73e">map_type</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>map</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Evaluate the constent template string in the context of the map. See class description. 
</div>
</div><p>
<a class="anchor" name="4221097aac73915f01f451dbc02be4b8"></a><!-- doxytag: member="restcgi::ctmpl::eval" ref="4221097aac73915f01f451dbc02be4b8" args="(const env &amp;e, const map_type &amp;map=map_type()) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string restcgi::ctmpl::eval           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classrestcgi_1_1env.html">env</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classrestcgi_1_1ctmpl.html#f2486c0cc6b8c3f67043ddc3bbd8d73e">map_type</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>map</em> = <code><a class="el" href="classrestcgi_1_1ctmpl.html#f2486c0cc6b8c3f67043ddc3bbd8d73e">map_type</a>()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Evaluate the constent template string in the context of the env and map (if any). See class description. 
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Mon May 18 16:03:19 2009 for restcgi by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
